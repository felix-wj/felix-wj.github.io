(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{639:function(t,e,s){"use strict";s.r(e);var a=s(10),r=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"安装android子系统"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装android子系统"}},[t._v("#")]),t._v(" 安装Android子系统")]),t._v(" "),e("p",[t._v("使用Android子系统需要开启「Hyper-V」和「虚拟机平台」两个两个选项。")]),t._v(" "),e("p",[t._v("而使用其他安卓模拟器则需要关闭Hyper-V，使得无法同时使用Docker。")]),t._v(" "),e("p",[t._v("首先下载Android子系统安装包，前往"),e("a",{attrs:{href:"https://github.com/LSPosed/MagiskOnWSA",target:"_blank",rel:"noopener noreferrer"}},[t._v("MagiskOnWSA"),e("OutboundLink")],1),t._v("，fork该项目，在action中使用overflow进行在线构建项目（GApps选项可按需选择），接着在构建好的项目中下载即可。READEME中有安装步骤介绍。")]),t._v(" "),e("p",[t._v("给新电脑安装时，发现这个仓库已经被"),e("code",[t._v("GitHub")]),t._v("官方封了，可能是不想被白嫖编译吧。"),e("a",{attrs:{href:"https://github.com/LSPosed/MagiskOnWSALocal",target:"_blank",rel:"noopener noreferrer"}},[t._v("新的仓库"),e("OutboundLink")],1),t._v("需要下载到本地，在Linux环境自行编译。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("将项目克隆到本地")])]),t._v(" "),e("li",[e("p",[t._v("执行"),e("code",[t._v("scripts/run.sh")]),t._v("脚本。")])]),t._v(" "),e("li",[e("p",[t._v("执行完毕后，在"),e("code",[t._v("output")]),t._v("目录查看安装包")])]),t._v(" "),e("li",[e("p",[t._v("将安装包移动到Windows目录并解压")])]),t._v(" "),e("li",[e("p",[t._v("运行"),e("code",[t._v("Install.ps1")]),t._v("或以管理员身份运行"),e("code",[t._v("PowerShell")]),t._v(",执行命令"),e("code",[t._v("PowerShell.exe -ExecutionPolicy Bypass -File .\\Install.ps1")])])])]),t._v(" "),e("p",[t._v("在执行"),e("code",[t._v("Install.ps1")]),t._v("时可能会闪退导致安装失败，这时换命令行安装方式"),e("code",[t._v("Add-AppxPackage -Register ./AppxManifest.xml")])]),t._v(" "),e("p",[t._v("此时遇到报错：")]),t._v(" "),e("div",{staticClass:"language-text line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Add-AppxPackage : 部署失败，原因是 HRESULT: 0x80073CFF, 要安装此应用程序，需要有 Windows 开发者许可证或启用旁加载的系统。\n由于无法应用有效的许可证或旁加载策略，部署程序包来源为 Unsigned 的程序包 MicrosoftCorporationII.WindowsSubsystemForAndr oid_2204.40000.20.0_x64__8wekyb3d8bbwe 失败。可能需要开发者许可证(http://go.microsoft.com/fwlink/?LinkId=233074)或企业旁加载配置(http://go.microsoft.com/fwlink/?LinkId=231020)。\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[e("a",{attrs:{href:"https://office66.cn/post/24212.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("解决办法"),e("OutboundLink")],1)]),t._v(" "),e("ol",[e("li",[e("p",[t._v("按win+R键打开运行，输入【gpedit.msc】，打开【本地组策略编辑器】")])]),t._v(" "),e("li",[e("p",[t._v("依次展开【计算机配置–>管理模板–>Windows组件–>应用程序包部署】，找到【允许开发Windows应用商店并从集成开发环境（IDE）安装】和【允许所有受信任的应用程序】，双击进入设置界面，选择【已启用】，然后后击【应用】确定即可。")])])]),t._v(" "),e("p",[t._v("设置好后再次执行"),e("code",[t._v("Add-AppxPackage -Register ./AppxManifest.xml")]),t._v("即可安装。")]),t._v(" "),e("p",[t._v("安装好后，按"),e("code",[t._v("WIN")]),t._v("键在推荐项目中可以看到"),e("code",[t._v("适用于Android的Windows子系统")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.chunjingtong.com/windows-11win11%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85android-%E5%AD%90%E7%B3%BB%E7%BB%9Fwsa%E8%BF%90%E8%A1%8C%E5%AE%89%E5%8D%93app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("打开开发者模式、使用adb连接、安装第三方app"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/makazeu/WsaToolbox/releases/tag/v1.3.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("WsaToolbox"),e("OutboundLink")],1),t._v(" 可以提供APK安装、APP管理、文件传输等功能。")]),t._v(" "),e("h2",{attrs:{id:"安装ca证书抓包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装ca证书抓包"}},[t._v("#")]),t._v(" 安装CA证书抓包")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("下载并安装"),e("a",{attrs:{href:"https://magiskcn.com/magisk-download",target:"_blank",rel:"noopener noreferrer"}},[t._v("Magisk"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("安装"),e("a",{attrs:{href:"https://github.com/NVISOsecurity/MagiskTrustUserCerts",target:"_blank",rel:"noopener noreferrer"}},[t._v("MagiskTrustUserCerts"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("该模块可以将用户级别下的CA证书，在每次系统启动时复制到系统级别下。\n在GitHub下载zip压缩包，通过WsaToolbox上传到Android子系统，然后在Magisk中导入该zip包")])]),t._v(" "),e("li",[e("p",[t._v("抓包工具可以使用HttpCanary,导出证书，然后使用WsaToolbox打开安卓系统设置，在安全设置中手动导入证书。导入成功，会在用户级别下看到证书，重启系统后，会被复制到系统级别下。")])])]),t._v(" "),e("h2",{attrs:{id:"更新wsa"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新wsa"}},[t._v("#")]),t._v(" 更新WSA")]),t._v(" "),e("p",[t._v("重新拉取代码，重新编译得到新的安装包，解压覆盖之前的安装目录，重新执行"),e("code",[t._v("Install.ps1")])]),t._v(" "),e("h2",{attrs:{id:"设置代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置代理"}},[t._v("#")]),t._v(" 设置代理")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.tjsky.net/tutorial/391",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("开启代理")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("adb connect "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:58526 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" adb shell "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"settings put global http_proxy '),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" route list match "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" table all scope global "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-F3")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(':7890"')]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("关闭代理")]),t._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[t._v("adb shell settings put global http_proxy :0\n\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);